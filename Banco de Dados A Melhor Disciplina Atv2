Delimiter//
Create procedure sp_autores()
Begin
    Select nome from autor;
End;
// Delimiter;
Call procedure sp_autores()

Delimiter //
Create procedure sp_livrocategoria(nmcategoria varchar(100))
Begin
    Select titulo, nome
    From livro inner join categoria
    Where categoria.nome = nmcategoria and livro.categoria_ID = categoria.categoria_ID;
End;
// Delimiter;
Call procedure sp_livrocategoria('Terror')

Delimiter //
Create procedure sp_contlivrocategoria(nmcategoria varchar (100))
Begin
    Select nome, count(*) as quant
    From livro inner join categoria
    Where categoria.nome = nmcategoria and livro.categoria_ID = categoria.categoria_ID
    group by categoria.nome;
End;
// Delimiter;
Call procedure sp_contlivrocategoria('Terror')

Delimiter //
create procedure sp_VfLivroCategoria(nmcategoria varchar(100))
begin
    declare temLivro int

    if exists (select 1 from Livro where categoria = nmcategoria)
        Set temLivro = 1
    else
        Set temLivro = 0
    Select temLivro AS 'A categoria possui livros'
end;
// Delimiter;
Call procedure sp_VfLivroCategoria ('Terror')

Delimiter //
create procedure sp_LivroAno(anopublic int)
begin
    select * from Livro
    where anopublicac <= ano_Publicac
end;
//  Delimiter;
call procedure sp_LivroAno('1985')

Delimiter //
create procedure sp_TitCategoria(in nmcategoria varchar(100))
begin
	select livro.tit 
    from livro inner join categoria 
    where categoria.categoria_ID = livro.categoria_ID AND categoria.nome = nmcategoria;
end;
// Delimiter;
call sp_TitCategoria('Ficção');





